{
    "sourceFile": "frontend/src/store/authStore.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1767980354040,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1767980354040,
            "name": "Commit-0",
            "content": "import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport type { AuthUser, UserRole } from '../types';\r\n\r\ninterface AuthState {\r\n  user: AuthUser | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  \r\n  // Actions\r\n  login: (user: AuthUser) => void;\r\n  logout: () => void;\r\n  setLoading: (loading: boolean) => void;\r\n  hasPermission: (page: string, action: string) => boolean;\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      user: null,\r\n      isAuthenticated: false,\r\n      isLoading: false,\r\n\r\n      login: (user: AuthUser) => {\r\n        set({ user, isAuthenticated: true });\r\n      },\r\n\r\n      logout: () => {\r\n        set({ user: null, isAuthenticated: false });\r\n      },\r\n\r\n      setLoading: (loading: boolean) => {\r\n        set({ isLoading: loading });\r\n      },\r\n\r\n      hasPermission: (page: string, action: string) => {\r\n        const { user } = get();\r\n        if (!user) return false;\r\n\r\n        const role = user.role as UserRole;\r\n        \r\n        // Admin has all permissions\r\n        if (role === 'admin') return true;\r\n\r\n        // Define permissions based on role\r\n        const permissions: Record<UserRole, Record<string, string[]>> = {\r\n          admin: {\r\n            dashboard: ['read'],\r\n            users: ['create', 'read', 'update', 'delete'],\r\n            preferences: ['create', 'read', 'update', 'delete'],\r\n            campaigns: ['create', 'read', 'update', 'delete', 'send', 'download'],\r\n            logs: ['read', 'download'],\r\n          },\r\n          creator: {\r\n            dashboard: ['read'],\r\n            users: ['create', 'read', 'update'],\r\n            preferences: ['create', 'read', 'update'],\r\n            campaigns: ['create', 'read', 'update', 'send', 'download'],\r\n            logs: ['read'],\r\n          },\r\n          viewer: {\r\n            dashboard: ['read'],\r\n            users: ['read'],\r\n            preferences: ['read'],\r\n            campaigns: ['read', 'download'],\r\n            logs: ['read', 'download'],\r\n          },\r\n        };\r\n\r\n        return permissions[role]?.[page]?.includes(action) || false;\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n    }\r\n  )\r\n);\r\n"
        }
    ]
}